<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Classroom Smart Board</title>
  <link rel="stylesheet" href="shared3D.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <style>
    /* Routine-specific styles */
    .time-container {
      position: fixed;
      top: 15px;
      right: 15px;
      width: 220px;
      background: var(--card-bg);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 4px 25px rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(10px);
      border: 1px solid var(--card-border);
      z-index: 10;
      transform-style: preserve-3d;
      transition: all 0.3s ease;
      animation: float 6s infinite ease-in-out;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) rotateX(0deg);
      }
      50% {
        transform: translateY(-10px) rotateX(5deg);
      }
    }

    .time-container:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5), 
                  0 0 20px rgba(80, 80, 255, 0.4);
    }

    .header {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 15px;
      color: var(--text-primary);
      text-shadow: 0 0 5px rgba(0, 102, 255, 0.5);
    }

    #period-info {
      margin: 15px 0;
      padding: 10px;
      border-radius: 8px;
      background: rgba(25, 25, 35, 0.7);
      border: 1px solid rgba(80, 80, 255, 0.2);
    }

    #period {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 8px;
      color: var(--accent-cyan);
    }

    #subject {
      font-size: 15px;
      margin-bottom: 5px;
      color: var(--text-primary);
    }

    #teacher {
      font-style: italic;
      font-size: 14px;
      color: var(--text-secondary);
    }

    #remaining-time {
      margin-top: 15px;
      font-size: 14px;
      color: var(--accent-cyan);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .time-badge {
      background: rgba(134, 16, 242, 0.3);
      padding: 5px 10px;
      border-radius: 12px;
      font-weight: bold;
      border: 1px solid var(--accent-purple);
    }

    .current-period {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        box-shadow: 0 0 5px var(--accent-blue);
      }
      50% {
        box-shadow: 0 0 15px var(--accent-cyan);
      }
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .time-container {
        width: 180px;
        padding: 15px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <div id="canvas-container"></div>
  
  <div class="time-container">
    <div id="day-date" class="header glow-text"></div>
    <div id="time" class="header"></div>
    <div id="period-info">
      <div id="period"></div>
      <div id="subject"></div>
      <div id="teacher"></div>
    </div>
    <div id="remaining-time"></div>
  </div>
  
  <script src="shared3D.js"></script>
  <script>
    // Class routine and teacher names
    const routine = [
      { start: "6:10", end: "6:50", period: "1st Period", subject: "Computer", teacher: "R. Dhakal" },
      { start: "6:50", end: "7:30", period: "2nd Period", subject: "Science", teacher: "A. Kurmi" },
      { start: "7:30", end: "8:10", period: "3rd Period", subject: "Mathematics", teacher: "S. Khan" },
      { start: "8:10", end: "8:50", period: "4th Period", subject: "Opt. Maths", teacher: "S. Khan" },
      { start: "8:50", end: "9:00", period: "Recess Time", subject: "", teacher: "" },
      { start: "9:00", end: "9:40", period: "5th Period", subject: "Social St.", teacher: "U. Pandey" },
      { start: "9:40", end: "10:20", period: "6th Period", subject: "Nepali", teacher: "H. Pandey" },
      { start: "10:20", end: "11:00", period: "7th Period", subject: "English", teacher: "N. Upadhyay" }
    ];

    // Function to get the current period
    function getCurrentPeriod() {
      const now = new Date();
      const currentTotal = now.getHours() * 60 + now.getMinutes();

      return routine.find(period => {
        const [startH, startM] = period.start.split(':').map(Number);
        const [endH, endM] = period.end.split(':').map(Number);
        const startTotal = startH * 60 + startM;
        const endTotal = endH * 60 + endM;
        
        return currentTotal >= startTotal && currentTotal < endTotal;
      });
    }

    // Function to format time
    function formatTime(hours, minutes) {
      return `${hours}:${minutes.toString().padStart(2, '0')}`;
    }

    // Function to calculate remaining time
    function getRemainingTime(period) {
      const now = new Date();
      const currentTotal = now.getHours() * 60 + now.getMinutes() + now.getSeconds() / 60;
      
      const [endH, endM] = period.end.split(':').map(Number);
      const endTotal = endH * 60 + endM;
      
      const remainingMins = Math.floor(endTotal - currentTotal);
      const remainingSecs = Math.floor(((endTotal - currentTotal) % 1) * 60);
      
      return { minutes: remainingMins, seconds: remainingSecs };
    }

    // Function to get next period
    function getNextPeriod(currentPeriod) {
      if (!currentPeriod) return null;
      
      const currentIndex = routine.findIndex(period => 
        period.period === currentPeriod.period);
      
      if (currentIndex !== -1 && currentIndex < routine.length - 1) {
        return routine[currentIndex + 1];
      }
      
      return null;
    }

    // Update the display
    function updateDisplay() {
      // Update day and date
      const now = new Date();
      const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      const day = days[now.getDay()];
      const date = now.toLocaleDateString('en-US', { day: 'numeric', month: 'short' });
      document.getElementById('day-date').textContent = `${day}, ${date}`;
      
      // Update current time
      const hours = now.getHours();
      const minutes = now.getMinutes();
      const seconds = now.getSeconds();
      const ampm = hours >= 12 ? 'PM' : 'AM';
      const formattedHours = hours % 12 || 12; // Convert 0 to 12 for 12-hour format
      
      document.getElementById('time').textContent = 
        `${formattedHours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')} ${ampm}`;
      
      // Update period info
      const currentPeriod = getCurrentPeriod();
      const periodInfo = document.getElementById('period-info');
      
      if (currentPeriod) {
        document.getElementById('period').textContent = currentPeriod.period;
        document.getElementById('subject').textContent = currentPeriod.subject || "Break Time";
        document.getElementById('teacher').textContent = currentPeriod.teacher || "";
        
        // Add current period highlight
        periodInfo.classList.add('current-period');
        
        // Calculate and display remaining time
        const remaining = getRemainingTime(currentPeriod);
        document.getElementById('remaining-time').innerHTML = 
          `Remaining: <span class="time-badge">${remaining.minutes}m ${remaining.seconds}s</span>`;
      } else {
        // No current period (classes over or haven't started)
        periodInfo.classList.remove('current-period');
        
        // Find the next period that will start today
        const now = new Date();
        const currentTotal = now.getHours() * 60 + now.getMinutes();
        
        const nextPeriodToday = routine.find(period => {
          const [startH, startM] = period.start.split(':').map(Number);
          const startTotal = startH * 60 + startM;
          return startTotal > currentTotal;
        });
        
        if (nextPeriodToday) {
          // Next period today
          const [startH, startM] = nextPeriodToday.start.split(':').map(Number);
          const startTotal = startH * 60 + startM;
          const waitMins = Math.floor(startTotal - currentTotal);
          
          document.getElementById('period').textContent = "Coming Up: " + nextPeriodToday.period;
          document.getElementById('subject').textContent = nextPeriodToday.subject || "Break Time";
          document.getElementById('teacher').textContent = nextPeriodToday.teacher || "";
          document.getElementById('remaining-time').innerHTML = 
            `Starting in: <span class="time-badge">${waitMins}m</span>`;
        } else {
          // No more periods today
          document.getElementById('period').textContent = "Classes Done";
          document.getElementById('subject').textContent = "No more classes today";
          document.getElementById('teacher').textContent = "";
          document.getElementById('remaining-time').textContent = "";
        }
      }
    }
    
    // Update the display initially and every second
    updateDisplay();
    setInterval(updateDisplay, 1000);
    
    // Enable 3D effects for the time container
    document.addEventListener('mousemove', function(e) {
      const container = document.querySelector('.time-container');
      const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
      const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
      container.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
    });
  </script>
</body>
</html>
