<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Stars Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="shared3D.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* Additional styles specific to star3.html */
        .auth-section {
            display: flex;
            justify-content: flex-end;
            padding: 10px;
            background: rgba(20, 20, 30, 0.8);
            backdrop-filter: blur(8px);
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .auth-form {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(0, 102, 255, 0.4);
            z-index: 100;
            border: 1px solid var(--card-border);
        }

        .auth-form.active {
            display: block;
            animation: fadeIn 0.3s forwards;
        }

        /* Dashboard */
        .dashboard {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Class Controls */
        .class-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            background: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--card-border);
        }

        /* Student Grid & Stars */
        .students-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .student-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--card-border);
            transform-style: preserve-3d;
        }

        .student-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4), 0 0 15px rgba(80, 80, 255, 0.3);
        }

        .student-name {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .stars-container {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }

        .star {
            color: var(--warning-color);
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s;
            filter: drop-shadow(0 0 3px rgba(251, 188, 5, 0.5));
        }

        .star:hover {
            transform: scale(1.2);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 90;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        /* Response Messages */
        .response-message {
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 8px;
            text-align: center;
        }

        .success-message {
            background: rgba(0, 204, 153, 0.3);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .error-message {
            background: rgba(255, 51, 102, 0.3);
            color: var(--danger-color);
            border: 1px solid var(--danger-color);
        }

        @media (max-width: 768px) {
            .class-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .students-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .student-name {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="glow-text">Student Stars Tracker</h1>
            <p>Reward and motivate your students with stars</p>
        </header>

        <!-- Authentication Section -->
        <div class="auth-section card">
            <button id="login-btn" class="btn"><i class="fas fa-user"></i> Login</button>
            <button id="signup-btn" class="btn"><i class="fas fa-user-plus"></i> Sign up</button>
            <button id="logout-btn" class="btn" style="display: none;"><i class="fas fa-sign-out-alt"></i> Logout</button>
    </div>

        <!-- Login Form -->
        <div id="login-form" class="auth-form">
            <h2>Login</h2>
            <div class="form-group">
                <label for="login-email">Email:</label>
                <input type="email" id="login-email" required>
            </div>
            <div class="form-group">
                <label for="login-password">Password:</label>
                <input type="password" id="login-password" required>
            </div>
            <button id="submit-login" class="btn"><i class="fas fa-sign-in-alt"></i> Login</button>
            <button class="cancel-btn btn btn-danger"><i class="fas fa-times"></i> Cancel</button>
            <div id="login-message"></div>
    </div>

        <!-- Signup Form -->
        <div id="signup-form" class="auth-form">
            <h2>Sign Up</h2>
            <div class="form-group">
                <label for="signup-email">Email:</label>
                <input type="email" id="signup-email" required>
            </div>
            <div class="form-group">
                <label for="signup-password">Password:</label>
                <input type="password" id="signup-password" required>
            </div>
            <button id="submit-signup" class="btn"><i class="fas fa-user-plus"></i> Sign Up</button>
            <button class="cancel-btn btn btn-danger"><i class="fas fa-times"></i> Cancel</button>
            <div id="signup-message"></div>
        </div>

        <div class="overlay"></div>

        <!-- Main Dashboard -->
        <div id="dashboard" class="dashboard">
            <!-- Class Controls -->
            <div class="class-controls card">
                <select id="class-select">
                    <option value="">Select a Class</option>
                    <!-- Classes will be loaded here -->
                </select>
                <input type="text" id="new-class-name" placeholder="New Class Name">
                <button id="add-class-btn" class="btn"><i class="fas fa-plus"></i> Add Class</button>
                <button id="delete-class-btn" class="btn btn-danger"><i class="fas fa-trash"></i> Delete Class</button>
                <input type="text" id="new-student-name" placeholder="New Student Name">
                <button id="add-student-btn" class="btn"><i class="fas fa-user-plus"></i> Add Student</button>
            </div>

            <!-- Response Messages -->
            <div id="response-container"></div>

            <!-- Students Grid -->
            <div id="students-grid" class="students-grid">
                <!-- Students will be loaded here -->
            </div>
        </div>
    </div>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyAKub2UWzj08vywPYuQ1SHNruMNUa4mVAw",
          authDomain: "dbs1-b8402.firebaseapp.com",
          projectId: "dbs1-b8402",
          storageBucket: "dbs1-b8402.firebasestorage.app",
          messagingSenderId: "149677040378",
          appId: "1:149677040378:web:07b14d473f0559021cdf43",
          measurementId: "G-ZZ2ZEPPJE5"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
      </script>
    <script src="shared3D.js"></script>
    <script>
        
        // Firebase Configuration
        // Initialize Firebase (uncommnet this if you have the actual config)
        // firebase.initializeApp(firebaseConfig);
        // const db = firebase.firestore();
        // const auth = firebase.auth();

        // DOM Elements
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const overlay = document.querySelector('.overlay');
        const cancelBtns = document.querySelectorAll('.cancel-btn');
        const submitLogin = document.getElementById('submit-login');
        const submitSignup = document.getElementById('submit-signup');
        const classSelect = document.getElementById('class-select');
        const newClassName = document.getElementById('new-class-name');
        const addClassBtn = document.getElementById('add-class-btn');
        const deleteClassBtn = document.getElementById('delete-class-btn');
        const newStudentName = document.getElementById('new-student-name');
        const addStudentBtn = document.getElementById('add-student-btn');
        const studentsGrid = document.getElementById('students-grid');
        const responseContainer = document.getElementById('response-container');

        // Auth UI Handling
        loginBtn.addEventListener('click', () => {
            loginForm.classList.add('active');
            overlay.classList.add('active');
        });

        signupBtn.addEventListener('click', () => {
            signupForm.classList.add('active');
            overlay.classList.add('active');
        });

        cancelBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                loginForm.classList.remove('active');
                signupForm.classList.remove('active');
                overlay.classList.remove('active');
            });
        });

        overlay.addEventListener('click', () => {
            loginForm.classList.remove('active');
            signupForm.classList.remove('active');
            overlay.classList.remove('active');
        });

        // Mock Implementation (since we don't have actual Firebase)
        let currentUser = null;
        let classes = [];
        let students = {};

        // Mock Auth
        submitLogin.addEventListener('click', () => {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (email && password) {
                // Mock successful login
                currentUser = { email };
                loginForm.classList.remove('active');
                overlay.classList.remove('active');
                updateAuthUI();
                loadMockData();
                showResponse('Successfully logged in!', 'success');
            } else {
                showResponse('Please enter both email and password', 'error');
            }
        });

        submitSignup.addEventListener('click', () => {
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            if (email && password) {
                // Mock successful signup
                currentUser = { email };
                signupForm.classList.remove('active');
                overlay.classList.remove('active');
                updateAuthUI();
                showResponse('Account created successfully!', 'success');
            } else {
                showResponse('Please enter both email and password', 'error');
            }
        });

        logoutBtn.addEventListener('click', () => {
            currentUser = null;
            updateAuthUI();
            resetDashboard();
            showResponse('Logged out successfully', 'success');
        });

        function updateAuthUI() {
            if (currentUser) {
                loginBtn.style.display = 'none';
                signupBtn.style.display = 'none';
                logoutBtn.style.display = 'inline-block';
            } else {
                loginBtn.style.display = 'inline-block';
                signupBtn.style.display = 'inline-block';
                logoutBtn.style.display = 'none';
            }
        }

        // Mock Data Loading
        function loadMockData() {
            classes = ['Class 10A', 'Class 9B', 'Class 8C'];
            students = {
                'Class 10A': [
                    { id: 1, name: 'Alice Smith', stars: 5 },
                    { id: 2, name: 'Bob Johnson', stars: 3 },
                    { id: 3, name: 'Charlie Brown', stars: 7 }
                ],
                'Class 9B': [
                    { id: 4, name: 'Diana Prince', stars: 10 },
                    { id: 5, name: 'Edward Norton', stars: 2 }
                ],
                'Class 8C': [
                    { id: 6, name: 'Fiona Apple', stars: 6 }
                ]
            };
            
            updateClassList();
        }

        // Update Class Dropdown
        function updateClassList() {
            classSelect.innerHTML = '<option value="">Select a Class</option>';
            
            classes.forEach(className => {
                const option = document.createElement('option');
                option.value = className;
                option.textContent = className;
                classSelect.appendChild(option);
            });
        }

        // Handle Class Selection
        classSelect.addEventListener('change', () => {
            const selectedClass = classSelect.value;
            if (selectedClass) {
                renderStudents(selectedClass);
            } else {
                studentsGrid.innerHTML = '';
            }
        });

        // Add New Class
        addClassBtn.addEventListener('click', () => {
            const className = newClassName.value.trim();
            if (className && !classes.includes(className)) {
                classes.push(className);
                students[className] = [];
                updateClassList();
                classSelect.value = className;
                renderStudents(className);
                newClassName.value = '';
                showResponse(`Class "${className}" added successfully`, 'success');
            } else if (classes.includes(className)) {
                showResponse('This class already exists', 'error');
            } else {
                showResponse('Please enter a class name', 'error');
            }
        });

        // Delete Class
        deleteClassBtn.addEventListener('click', () => {
            const selectedClass = classSelect.value;
            if (selectedClass) {
                classes = classes.filter(c => c !== selectedClass);
                delete students[selectedClass];
                updateClassList();
                studentsGrid.innerHTML = '';
                showResponse(`Class "${selectedClass}" deleted`, 'success');
                    } else {
                showResponse('Please select a class to delete', 'error');
            }
        });

        // Add New Student
        addStudentBtn.addEventListener('click', () => {
            const selectedClass = classSelect.value;
            const studentName = newStudentName.value.trim();
            
            if (!selectedClass) {
                showResponse('Please select a class first', 'error');
                return;
            }
            
            if (studentName) {
                const newId = Date.now();
                const newStudent = { id: newId, name: studentName, stars: 0 };
                students[selectedClass].push(newStudent);
                renderStudents(selectedClass);
                newStudentName.value = '';
                showResponse(`Student "${studentName}" added to ${selectedClass}`, 'success');
            } else {
                showResponse('Please enter a student name', 'error');
            }
        });

        // Render Students for a Class
        function renderStudents(className) {
            studentsGrid.innerHTML = '';
            
            if (students[className]?.length > 0) {
                students[className].forEach(student => {
                    const studentCard = document.createElement('div');
                    studentCard.className = 'student-card card';
                    studentCard.innerHTML = `
                        <div class="student-name">${student.name}</div>
                        <div class="stars-container">
                            ${getStarsHTML(student.stars)}
                        </div>
                        <button class="add-star-btn btn" data-id="${student.id}">
                            <i class="fas fa-plus"></i> Add Star
                        </button>
                        <button class="remove-star-btn btn btn-danger" data-id="${student.id}">
                            <i class="fas fa-minus"></i> Remove Star
                        </button>
                        <button class="delete-student-btn btn btn-danger" data-id="${student.id}">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    `;
                    studentsGrid.appendChild(studentCard);
                    
                    // Add event listeners for buttons
                    studentCard.querySelector('.add-star-btn').addEventListener('click', () => addStar(className, student.id));
                    studentCard.querySelector('.remove-star-btn').addEventListener('click', () => removeStar(className, student.id));
                    studentCard.querySelector('.delete-student-btn').addEventListener('click', () => deleteStudent(className, student.id));
                });
            } else {
                studentsGrid.innerHTML = '<p>No students in this class yet. Add a student above.</p>';
            }
        }

        // Generate Stars HTML
        function getStarsHTML(count) {
            let starsHTML = '';
            for (let i = 0; i < count; i++) {
                starsHTML += '<span class="star"><i class="fas fa-star"></i></span>';
            }
            return starsHTML;
        }

        // Add Star
        function addStar(className, studentId) {
            const studentIndex = students[className].findIndex(s => s.id === studentId);
            if (studentIndex !== -1) {
                students[className][studentIndex].stars += 1;
                renderStudents(className);
                showResponse(`Star added to ${students[className][studentIndex].name}`, 'success');
            }
        }

        // Remove Star
        function removeStar(className, studentId) {
            const studentIndex = students[className].findIndex(s => s.id === studentId);
            if (studentIndex !== -1 && students[className][studentIndex].stars > 0) {
                students[className][studentIndex].stars -= 1;
                renderStudents(className);
                showResponse(`Star removed from ${students[className][studentIndex].name}`, 'success');
            }
        }

        // Delete Student
        function deleteStudent(className, studentId) {
            const studentIndex = students[className].findIndex(s => s.id === studentId);
            if (studentIndex !== -1) {
                const studentName = students[className][studentIndex].name;
                students[className] = students[className].filter(s => s.id !== studentId);
                renderStudents(className);
                showResponse(`Student "${studentName}" deleted`, 'success');
            }
        }

        // Show Response Message
        function showResponse(message, type) {
            const responseDiv = document.createElement('div');
            responseDiv.className = `response-message ${type}-message`;
            responseDiv.textContent = message;
            
            responseContainer.appendChild(responseDiv);
            
            // Auto-remove after 3 seconds
            setTimeout(() => {
                responseDiv.style.opacity = '0';
                setTimeout(() => responseContainer.removeChild(responseDiv), 500);
            }, 3000);
        }

        // Reset Dashboard
        function resetDashboard() {
            classSelect.innerHTML = '<option value="">Select a Class</option>';
            studentsGrid.innerHTML = '';
            classes = [];
            students = {};
        }
    </script>
</body>
</html>